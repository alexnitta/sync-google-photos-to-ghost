# sync-google-photos-to-ghost

A simple application that syncs Google Photos albums to Ghost blog posts.

For more on how this works, run the app and view the [dashboard](http://localhost:3000/dashboard) after signing in, or head to [./app/routes/dashboard.tsx](./app/routes/dashboard.tsx).

This is a Remix app; for more on Remix, see the [Remix Docs](https://remix.run/docs).

Deployment has been configured for Fly.io by using `npx create-remix@latest` and selecting Fly.io as the deployment target.

## Environment variables

You must create a `.env` file to run this application locally. It should contain the following:

```dotenv
# Set these up by adding a "Custom integration" to your Ghost blog, which you can do in the blog
# settings in the admin dashboard.
GHOST_ADMIN_API_KEY="replace_me"
GHOST_ADMIN_API_URL="replace_me"

# Follow these instructions to set up an OAuth 2.0 client ID:
# https://developers.google.com/photos/library/guides/get-started
#
# Make sure to set your client up with the following:
# - Authorized JavaScript origins: must include "http://localhost:3000" for local use and your
#   deployed root URL for production
# - Authorized redirect URIs: must include "http://localhost:3000/auth/google/callback" for local
#   use and the same path in your deployed domain for production
#
# Once you've set up the OAuth 2.0 Client, you can copy its Client ID and Client secret and add them
# here.
GOOGLE_CLIENT_ID="replace_me"
GOOGLE_CLIENT_SECRET="replace_me"

# Any random thirty-character string
SESSION_COOKIE_SECRET="replace_me"
```

You will also need to set these variables in your production environment; in Fly.io, you can do this by [setting secrets](https://fly.io/docs/reference/secrets/#setting-secrets).

---

> The docs below were generated by running `npx create-remix@latest`.

## Fly Setup

1. [Install `flyctl`](https://fly.io/docs/getting-started/installing-flyctl/)

2. Sign up and log in to Fly

```sh
flyctl auth signup
```

3. Setup Fly. It might ask if you want to deploy, say no since you haven't built the app yet.

```sh
flyctl launch
```

## Development

From your terminal:

```sh
npm run dev
```

This starts your app in development mode, rebuilding assets on file changes.

## Deployment

If you've followed the setup instructions already, all you need to do is run this:

```sh
npm run deploy
```

You can run `flyctl info` to get the url and ip address of your server.

Check out the [fly docs](https://fly.io/docs/getting-started/node/) for more information.
